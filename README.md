# zht4971

![Electron](https://img.shields.io/badge/Electron-28.0.0-blue) 
![License](https://img.shields.io/badge/License-MIT-green)

**zht4971** - портативное десктоп-приложение для организации структурированных записей с поддержкой мультимедийного контента, тегов и продвинутых связей, предназначенное для хранения личной информации.

## Основные возможности

- Хранение и просмотр информации
  - Записи с текстом в формате Markdown
  - Вложенные файлы до 2 ГБ (изображения, видео и т.д.)

- Поиск записей
  - Тегирование в свободной форме
  - Быстрый умный поиск по тегам

- Продвинутые связи
  - Ссылки между записями `[[пример]]`
  - Автоматическая конкретизация ссылок по семантическим датам записей
  - Хабы для группировки записей `{{хаб (20.04.2025)/секция}}`

- Безопасность
  - Шифрование AES-256
  - Ключ PBKDF2
  - Локальное хранение данных, в той же папке, в которой расположенна основная папка программы

## Запуск

### Загрузка готового приложения

- Для Windows: https://github.com/mosfet971/zht4971/releases/latest/download/zht4971-win32-x64.zip
- Для Linux: https://github.com/mosfet971/zht4971/releases/latest/download/zht4971-linux-x64.zip

### Самостоятельная сборка

Клонирование репозитория: 

```
git clone https://github.com/mosfet971/zht4971.git
cd zht4971
```

Установка зависимостей: 

```
npm install
```

Запуск в режиме разработки: 

```
npm run buildAndStart
```

Сборка для Windows: 

```
npm run packageWindows
```

Сборка для Linux: 

```
npm run packageLinux
```

## Подробное описание

zht4971 является приложением для хранения текста и файлов. Базовая единица информации в приложении - запись. Записи представляют собой объекты, содержащие основной текст (в котором могут быть добавлены файлы), название, список псевдонимов, а также ряд других параметров. Основная идея программы заключается в создании большого набора помеченых тегами записей, среди которых можно находить нужные посредством поиска.

Основным средством доступа к записям в программе являются теги. Они могут задаваться в относительно свободной форме, так как при поиске записей учитывается как их написание, так и смысл слов.

Интерфейс программы разделен на несколько вкладок, таких как: "Меню", "Поиск по тегам", "Избранное", "Справка", "Просмотр и изменение". Используется шифрование алгоритмом AES-256 в режиме CBC и формирование ключа на основе пароля при помощи алгоритма PBKDF2. Приложение является портативным и помещается в одной папке. Установка не требуется. База данных, создаваемая программой, расположена в папке, содержащей папку программы. В текстах записей поддерживается markdown.

Поддерживается добавление в записи файлов объемом до 2 гб (изображений, видео, архивов и прочего). Они будут отображены соответствующим их типу образом при просмотре записи. Загружаемые видео должны быть в формате webm или mp4, поэтому в некоторых случаях может потребоваться их конвертация при помощи сторонних средств. Для удаления из базы данных файлов, которые более не используются, в следствие удаления или изменения записей, рекомендуется периодически запускать сборку мусора через меню функций.

Каждая запись имеет обязательно указываемую семантическую дату в формате "дд.мм.гггг". Она указывается в специальном параметре записи, в ее названии в скобках, а также в каждом псевдониме аналогично названию. Наличие семантической даты позволяет избежать путаницы между записями, посвященными сущностям, имеющим одинаковое название, но разную суть стоящую за ним, варьирующуюся по мере хода времени.

Для удобства дачи ссылок, в программе существует алгоритм автоматической конкретизации семантической даты целевой записи ссылки, исполняющийся в момент перехода по ним. Во время любого перехода по ссылке, производится анализ ее текста-указателя (примерного названия или псевдонима цели ссылки), и делаются некоторые выводы. Если текст-указатель ссылки содержит семантическую дату в стандартном формате программы, ссылка обрабатывается "как есть". Если нет, то запускается конкретизатор. Он выбирает в качестве целевой для перехода записи ближайшую к источнику ссылки по семантической дате запись, по возможности более старую, чем источник ссылки. Если текст-указатель содержит набор символов "-", то по возможности будет выбираться не более старая, а наоборот более новая запись.

Для того чтобы из текста записи дать ссылку на другую запись, необходимо приблизительно написать ее название или один из псевдонимов в двойных квадратных скобках. Пример: `[[x]]`, где x - название или псевдоним записи, на которую планируется дать ссылку. Название или псевдоним записи можно указать без семантической даты, в таком случае ее автоматически определит конкретизатор. Отображаемый текст ссылки можно задать через символ "|". Пример: `[[x|y]]`, где x - название или псевдоним записи, на которую планируется дать ссылку, а y - текст, которым будет написана ссылка. 

Для добавления в отображаемый вид записи текста другой записи используется конструкция, аналогичная ссылке, но с восклицательным знаком перед ней. Пример: `![[x]]`, где x - название или псевдоним целевой записи.


Для связывания нескольких записей, в программе предусмотренна возможность создания хабов - специальных, автоматически наполняемых, таблиц со ссылками на записи.
Хабы задаются через указания принадлежности к ним записей в их текстах, при помощи выражений
следующего вида: `{{x}}`, где x - произвольно выбранное название хаба. Другой вариант: `{{x/y}}`, где x - название хаба, а y - название секции хаба, к которой принадлежит данная
запись. Записи, в тексте которых есть такие выражения с одним и тем же названием хаба, будут связанны этим хабом. Отдельной процедуры его создания не требуется. Название хаба
обрабатывается однозначно, поэтому оно должно быть указанно точно и без ошибок.
В отображаемом виде хаб имеет заголовок, который является его названием и ссылкой на запись с таким же названием. Название хаба обязательно должно включать семантическую дату
в том же формате, в котором она указывается в названиях записей. В соответствие каждому хабу рекомендуется создавать запись, кратко описывающую его в целом и имеющее
то же название, что и он.
